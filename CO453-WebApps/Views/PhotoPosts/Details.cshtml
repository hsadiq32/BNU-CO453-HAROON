@model CO453_WebApps.Models.PhotoPost

@{
    ViewData["Title"] = "Details";
}
<meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
<link rel="stylesheet" href="~/css/Product%20Sans.css" />
<link rel="stylesheet" href="~/css/App04_Styles.css" />
<h1>Details</h1>

<div>
    <h4>PhotoPost</h4>
    <hr />
    <div class="message-dashboard" style="margin: 0px 5px 0px 5px;">
        <div class="row d-flex justify-content-around">
            <div class="message-box col-md-4">
                <div class="box-header-wrapper">
                    <p class="box-text-username">@Html.DisplayFor(model => model.Username)</p>
                    <div class="d-flex justify-content-around box-wrapper-icons">
                        <p style="color:grey;font-size:1rem;text-align:right;margin-top:-8px;"><b>@Html.DisplayFor(model => model.Timestamp)</b></p>
                        <a>
                            <span class="oi oi-thumb-up"></span>
                        </a>
                    </div>
                </div>
                <div class="PhotoPost-img">
                    <img class="box-img-thumbnail" src="~/App04Images/@Html.DisplayFor(model => model.Filename)" onerror="this.style.display = 'none';" alt="">
                </div>
                <div class="box-text-wrapper d-flex">
                    <p class="text-center box-text-description align-self-center" style="width: 100%;font-size: 165%;margin-bottom: 0px;padding: 3px;padding-bottom: 0px;">@Html.DisplayFor(model => model.Caption)</p>
                </div>
            </div>
            <div class="message-box col" style="width:100%">
                <div>
                    <p class="text-center" style="color:#191919;font-size:1.2rem;"><b>Comments</b></p>
                    @if (Model.Comments == null || Model.Comments.Count() == 0)
                    {
                        <p>
                            No comments have been posted yet!
                        </p>
                    }
                    else
                    {
                        int count = 0;
                        foreach (Comment comment in Model.Comments)
                        {
                            count++;
                            <p style="font-size:1rem;color:grey;"><b>@count</b> @comment.Text</p>
                        }
                    }
                </div>
            </div>
        </div>
    </div>
</div>

    <hr />
    <div>
        <a class="btn btn-danger" title="Should only be availble to the author"
           asp-action="Edit" asp-route-id="@Model.PostID">
            Edit
        </a>
        <a class="btn btn-success" asp-action="Like" title="Like"
           asp-route-id="@Model.PostID">
            <i class="bi bi-hand-thumbs-up"></i>
        </a>
        <a class="btn btn-warning" asp-action="Unlike" title="Unlike"
           asp-route-id="@Model.PostID">
            <i class="bi bi-hand-thumbs-down"></i>
        </a>
        <a class="btn btn-info" asp-controller="Comments"
           asp-action="Create" title="Add comment"
           asp-route-id="@Model.PostID">
            <i class="bi bi-chat-left-text"></i>
            Comment
        </a>
        <a class="btn btn-secondary" asp-action="Index">&lt;&lt;Back to Photo Posts</a>
    </div>
    <hr />
    <div>
        <a asp-action="Edit" asp-route-id="@Model.PostID">Edit</a> |
        <a asp-action="Index">Back to List</a>
    </div>
